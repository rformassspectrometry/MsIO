<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Store MS data objects using the alabaster framework — AlabasterParam • MsIO</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Store MS data objects using the alabaster framework — AlabasterParam"><meta name="description" content="The alabaster framework
provides the methodology to save R objects to on-disk representations/
storage modes which are programming language independent (in contrast to
e.g. R's RDS files). By using standard file formats such as JSON and HDF5,
alabaster ensures that the data can also be read and imported by other
programming languages such as Python or Javascript. This improves
interoperability between application ecosystems.
The alabaster package defines the saveObject() and readObject()
methods. Implementations of these methods are available for the following
classes hence allowing to use saveObject() and readObject() directly on
these objects:
MsBackendMzR, defined in the
Spectra package.
Spectra, defined in the
Spectra package.


In addition, the MsIO package defines the AlabasterParam which can be
used to write or read MS objects using the saveMsObject() and
readMsObject() methods. This allows additional configurations and
customizations to the export or import process. It is thus for example
possible to specify the path to the original MS data files for on-disk MS
representations such as the MsBackendMzR which enables to import a stored
object even if either the object or the original MS data files have been
moved to a different directory or file system.
Importantly, it is only possible to save one object in one directory. To
overwrite an existing stored object in a folder, that folder has to be
deleted beforehand.
Details and properties for the alabaster-based storage modes for the
various supported MS data objects are listed in the following sections."><meta property="og:description" content="The alabaster framework
provides the methodology to save R objects to on-disk representations/
storage modes which are programming language independent (in contrast to
e.g. R's RDS files). By using standard file formats such as JSON and HDF5,
alabaster ensures that the data can also be read and imported by other
programming languages such as Python or Javascript. This improves
interoperability between application ecosystems.
The alabaster package defines the saveObject() and readObject()
methods. Implementations of these methods are available for the following
classes hence allowing to use saveObject() and readObject() directly on
these objects:
MsBackendMzR, defined in the
Spectra package.
Spectra, defined in the
Spectra package.


In addition, the MsIO package defines the AlabasterParam which can be
used to write or read MS objects using the saveMsObject() and
readMsObject() methods. This allows additional configurations and
customizations to the export or import process. It is thus for example
possible to specify the path to the original MS data files for on-disk MS
representations such as the MsBackendMzR which enables to import a stored
object even if either the object or the original MS data files have been
moved to a different directory or file system.
Importantly, it is only possible to save one object in one directory. To
overwrite an existing stored object in a folder, that folder has to be
deleted beforehand.
Details and properties for the alabaster-based storage modes for the
various supported MS data objects are listed in the following sections."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MsIO</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/MsIO.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/MsIO/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Store MS data objects using the alabaster framework</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/MsIO/blob/main/R/AlabasterParam.R" class="external-link"><code>R/AlabasterParam.R</code></a>, <a href="https://github.com/RforMassSpectrometry/MsIO/blob/main/R/MsBackendMzR.R" class="external-link"><code>R/MsBackendMzR.R</code></a>, <a href="https://github.com/RforMassSpectrometry/MsIO/blob/main/R/MsExperiment.R" class="external-link"><code>R/MsExperiment.R</code></a>, and 2 more</small>
      <div class="d-none name"><code>AlabasterParam.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <a href="https://github.com/ArtifactDB/alabaster.base" class="external-link"><em>alabaster</em> framework</a>
provides the methodology to save R objects to on-disk representations/
storage modes which are programming language independent (in contrast to
e.g. R's RDS files). By using standard file formats such as JSON and HDF5,
alabaster ensures that the data can also be read and imported by other
programming languages such as Python or Javascript. This improves
interoperability between application ecosystems.</p>
<p>The <em>alabaster</em> package defines the <code>saveObject()</code> and <code>readObject()</code>
methods. Implementations of these methods are available for the following
classes hence allowing to use <code>saveObject()</code> and <code>readObject()</code> directly on
these objects:</p><ul><li><p><code>MsBackendMzR</code>, defined in the
<a href="https://bioconductor.org/packages/Spectra" class="external-link"><em>Spectra</em></a> package.</p></li>
<li><p><code>Spectra</code>, defined in the
<a href="https://bioconductor.org/packages/Spectra" class="external-link"><em>Spectra</em></a> package.</p></li>
</ul><p>In addition, the <em>MsIO</em> package defines the <code>AlabasterParam</code> which can be
used to write or read MS objects using the <code><a href="saveMsObject.html">saveMsObject()</a></code> and
<code><a href="saveMsObject.html">readMsObject()</a></code> methods. This allows additional configurations and
customizations to the export or import process. It is thus for example
possible to specify the path to the original MS data files for <em>on-disk</em> MS
representations such as the <code>MsBackendMzR</code> which enables to import a stored
object even if either the object or the original MS data files have been
moved to a different directory or file system.</p>
<p>Importantly, it is only possible to save <strong>one object in one directory</strong>. To
overwrite an existing stored object in a folder, that folder has to be
deleted beforehand.</p>
<p>Details and properties for the <em>alabaster</em>-based storage modes for the
various supported MS data objects are listed in the following sections.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">AlabasterParam</span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMzR'</span></span>
<span><span class="fu">saveObject</span><span class="op">(</span><span class="va">x</span>, <span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMzR,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMzR,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, spectraPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsExperiment'</span></span>
<span><span class="fu">saveObject</span><span class="op">(</span><span class="va">x</span>, <span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsExperiment,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsExperiment,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu">saveObject</span><span class="op">(</span><span class="va">x</span>, <span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'XcmsExperiment'</span></span>
<span><span class="fu">saveObject</span><span class="op">(</span><span class="va">x</span>, <span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'XcmsExperiment,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'XcmsExperiment,AlabasterParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p><code>character(1)</code> with the name of the directory where the MS data
object should be saved to or from which it should be restored.
Importantly, path should point to a <strong>new</strong> folder, i.e. a directory
that <strong>does not already exist</strong>.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>MS data object to export. Can be one of the supported classes
listed below.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>optional additional parameters passed to the downstream
functions, such as for example <code>spectraPath</code> described above.</p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>for <code><a href="saveMsObject.html">saveMsObject()</a></code>: the MS data object to save, for
<code><a href="saveMsObject.html">readMsObject()</a></code>: the MS data object that should be returned</p></dd>


<dt id="arg-param">param<a class="anchor" aria-label="anchor" href="#arg-param"></a></dt>
<dd><p>an object defining and (eventually configuring) the file format
and file name or directory to/from which the data object should be
exported/imported.</p></dd>


<dt id="arg-spectrapath">spectraPath<a class="anchor" aria-label="anchor" href="#arg-spectrapath"></a></dt>
<dd><p>For <code><a href="saveMsObject.html">readMsObject()</a></code>: <code>character(1)</code> optionally allowing
to define the (absolute) path where the spectra files (<em>data storage
files</em>) can be found. This parameter is used for <code>MsBackendMzR</code> (see
descriptions below) and can be passed through <code>...</code> also to
<code><a href="saveMsObject.html">readMsObject()</a></code> functions for other classes (such as <code>Spectra</code>,
<code>MsExperiment</code> etc).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For <code>AlabasterParam()</code>: an instance of <code>AlabasterParam</code> class. For
<code>readObject()</code> the exported object in the specified path (depending on
the type of object defined in the <em>OBJECT</em> file in the path. For
<code><a href="saveMsObject.html">readMsObject()</a></code> the exported data object, defined with the function's
first parameter, from the specified path. <code>saveObject()</code> and
<code><a href="saveMsObject.html">saveMsObject()</a></code> don't return anything.</p>
    </div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-msbackendmzr-objects">On-disk storage for <code>MsBackendMzR</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-msbackendmzr-objects"></a></h2>



<p><code>MsBackendMzR</code> objects can be exported or imported using the
<code><a href="saveMsObject.html">saveMsObject()</a></code> or <code><a href="saveMsObject.html">readMsObject()</a></code> functions to and from <em>alabaster</em>-based
storage modes using the <code>AlabasterParam</code> parameter object. Alternatively
<em>alabaster</em>'s <code>saveObject()</code> and <code>readObject()</code> can be used. The parameter
<code>spectraPath</code> allows to define an alternative path to the original
data files (in case these were moved). This parameter can be passed as
additional parameter to both the <code>readObject()</code> as well as the
<code><a href="saveMsObject.html">readMsObject()</a></code> methods.</p>
<p>The format of the folder contents follows the <em>alabaster</em> format: a file
<em>OBJECT</em> (in JSON format) defines the type of object that was stored in the
directory while the object's data, for <code>MsBackendMzR</code>, is stored in
sub-folders <em>peaks_variables</em> (a <code>character</code> with the names of the peaks
variables of the object) and <em>spectra_data</em> (the metadata for all spectra).
Each sub-folder contains also an <em>OBJECT</em> file defining the object's type
and an additional file (in HDF5 format) containing the data. See examples
below for details.</p>
    </div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-spectra-objects">On-disk storage for <code>Spectra</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-spectra-objects"></a></h2>



<p><code>Spectra</code> objects can be exported/imported using <code><a href="saveMsObject.html">saveMsObject()</a></code> and
<code><a href="saveMsObject.html">readMsObject()</a></code> with an <code>AlabasterParam</code>, or using the <code>saveObject()</code>
and <code>readObject()</code> functions. Both read functions allow to pass additional
parameters (such as <code>spectraPath</code>) to the import function for the
<code>Spectra</code>'s backend.</p>
<p>The content of the folder with the stored <code>Spectra</code> data contains the
<em>OBJECT</em> file defining the type of the object stored in that directory and
the <em>spectra_processing_queue.json</em> file that contains the <em>processing queue</em>
of the <code>Spectra</code> objects. All other slots of the object are saved in
<em>alabaster</em> format into their respective sub-directories: <em>backend</em> for the
<code>MsBackend</code> (see also <code>MsBackendMzR</code> above), <em>metadata</em> for the metadata
slot, <em>processing</em> for the processing log, <em>processing_chunk_size</em> with
the size for chunk-wise processing and <em>processing_queue_variables</em> for
spectra/peaks variables that are needed for the processing queue.</p>
    </div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-msexperiment-objects">On-disk storage for <code>MsExperiment</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-msexperiment-objects"></a></h2>



<p><code>MsExperiment</code> is a container for various (different) MS data objects
related to the same <em>experiment</em>. It is a very flexible object that can, but
does not must contain actual MS data in form of e.g. a <code>Spectra</code> object.
For the alabaster-based disk storage of an <code>MsExperiment</code>, each of the
object's slots gets exported separately into its own subfolder within the
object's directory (defined with parameter <code>path</code>). For the export of the
individual slots, the respective <code>saveObject()</code> method is used. Similar to
all other objects listed here, <code>MsExperiment</code> can be stored using either
<code>saveObject()</code> or <code>saveMsObject</code> (with <code>AlabasterParam</code>) and <em>restored</em>
using <code>readObject()</code> or <code><a href="saveMsObject.html">readMsObject()</a></code> (with <code><a href="https://rdrr.io/pkg/MsExperiment/man/MsExperiment.html" class="external-link">MsExperiment()</a></code> passed as
the first parameter and <code>AlabasterParam</code> as second). The read functions
support passing additional parameters to the import function(s) for object's
MS data object(s), such as the <code>spectraPath</code> parameter described above
through <code>...</code>.</p>
<p>The content of the folder with the stored <code>MsExperiment</code> data contains a
file <code>OBJECT</code> (in JSON format, with the type of class defined as
<code>"ms_experiment"</code>) and subfolders for the various slots, each saved to disk
using the data type-specific <code>saveObject()</code> function:</p><ul><li><p><code>@sampleData</code>: <code>DataFrame</code> stored into a folder named <em>sample_data</em>.</p></li>
<li><p><code>@sampleDataLinks</code>: the <code>List</code> is stored into a folder named
<em>sample_data_links</em>, its <em>metadata columns</em> <code>DataFrame</code> (i.e. <code><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">mcols()</a></code>
of the <code>List</code>) into a folder named <em>sample_data_links_mcols</em>.</p></li>
<li><p><code>@spectra</code>: if not <code>NULL, a </code>Spectra<code>object stored into a folder with the name *spectra* (using</code>saveObject()<code>of</code>Spectra<code>objects described above). This requires the *alabaster.se* package to be installed. If the value of the</code>@spectra<code>slot is</code>NULL` no directory <em>spectra</em> is
created.</p></li>
<li><p><code>@experimentFiles</code>: <code>MsExperimentFiles</code> object saved using <code>saveObject()</code>
into a folder named <em>experiment_files</em>. <code>MsExperimentFiles</code> are saved as
a named list of <code>character</code> strings.</p></li>
<li><p><code>@qdata</code>: if not <code>NULL</code>, the object in this slot (either a <code>QFeatures</code> or
<code>SummarizedExperiment</code>) is stored into a folder with the name <em>qdata</em>
using the <code>saveObject()</code> method of the respective object. If the value for
the <code>@qdata</code> slot is <code>NULL</code> the folder <em>qdata</em> is not created. At present,
export of <code>QFeatures</code> objects is not supported!</p></li>
<li><p><code>@otherData</code>: <code>List</code> data is saved into a folder named <em>other_data</em>.</p></li>
<li><p><code>@metadata</code>: <code>List</code> data is saved into a filder named <em>metadata</em>.</p></li>
</ul><p>Note that the data type of the <code>assays</code> of imported (previously stored)
<code>SummarizedExperiment</code> objects are of type <code>ReloadedMatrix</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-xcmsexperiment-objects">On-disk storage for <code>XcmsExperiment</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-xcmsexperiment-objects"></a></h2>



<p><code>XcmsExperiment</code> objects extend the <code>MsExperiment</code> object and contain in
addition the results of a preprocessing of the MS data using the <em>xcms</em>
package. These objects can be exported/imported in the formats used for
<em>alabaster</em>-based storage using the <code>saveObject()</code> and <code>readObject()</code>
functions as well as using <code><a href="saveMsObject.html">saveMsObject()</a></code> and <code><a href="saveMsObject.html">readMsObject()</a></code> with
an <code>AlabasterParam</code> parameter object. As with all other methods, additional
parameters can be passed with the <code>...</code> parameter (such as the
<code>spectraData</code> parameter for import of a <code>MsBackendMzR</code> discussed above).
The storage directory contains all files and folders created by the export
of the <code>MsExperiment</code> (see above) and in addition the specific results
of <em>xcms</em> from the respective slots of the object:</p><ul><li><p><code>@chromPeaks</code>: this numeric matrix is stored in a folder names
<em>chrom_peaks</em>.</p></li>
<li><p><code>@chromPeakData</code>: this <code>data.frame</code> is first converted to a <code>DataFrame</code>
and then stored to a folder <em>chrom_peak_data</em> (in the <em>alabaster</em> format
for <code>DataFrame</code>).</p></li>
<li><p><code>@featureDefinitions</code>: this <code>data.frame</code> is first converted to a
<code>DataFrame</code> and then stored to a folder <em>feature_definitions</em> (also in
<em>alabaster</em> format for <code>DataFrame</code>).</p></li>
<li><p><code>@processHistory</code>: the list of <code>ProcessHistory</code> objects is stored in JSON
format to a file <em>xcms_experiment_process_history.json</em>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other MS object export and import formats.:
<code><a href="PlainTextParam.html">PlainTextParam</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Rainer, Philippine Louail</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">########</span></span></span>
<span class="r-in"><span><span class="co">## Export and import a `MsBackendMzR` object:</span></span></span>
<span class="r-in"><span><span class="co">####</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RforMassSpectrometry/Spectra" class="external-link">Spectra</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: S4Vectors</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: stats4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: BiocGenerics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘BiocGenerics’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     IQR, mad, sd, var, xtabs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     Filter, Find, Map, Position, Reduce, anyDuplicated, aperm, append,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     as.data.frame, basename, cbind, colnames, dirname, do.call,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     duplicated, eval, evalq, get, grep, grepl, intersect, is.unsorted,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     lapply, mapply, match, mget, order, paste, pmax, pmax.int, pmin,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     pmin.int, rank, rbind, rownames, sapply, setdiff, table, tapply,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     union, unique, unsplit, which.max, which.min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘S4Vectors’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:utils’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     findMatches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     I, expand.grid, unname</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: BiocParallel</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: ProtGenerics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘ProtGenerics’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     smooth</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">msdata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"TripleTOF-SWATH"</span>, <span class="st">"PestMix1_DDA.mzML"</span>, package <span class="op">=</span> <span class="st">"msdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">MsBackendMzR</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">fl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendMzR with 7602 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     0.231         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            1     0.351         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1     0.471         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            1     0.591         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            1     0.711         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7598         1   899.491      7598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7599         1   899.613      7599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7600         1   899.747      7600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7601         1   899.872      7601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7602         1   899.993      7602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 33 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Export the object to a temporary directory using the alabaster framework;</span></span></span>
<span class="r-in"><span><span class="co">## the equivalent command using the parameter object would be</span></span></span>
<span class="r-in"><span><span class="co">## `saveMsObject(be, AlabasterParam(d))`.</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ms_backend_mzr_example"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">saveObject</span><span class="op">(</span><span class="va">be</span>, <span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## List the content of the folder</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "OBJECT"                        "peaks_variables/OBJECT"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "peaks_variables/contents.h5"   "spectra_data/OBJECT"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "spectra_data/basic_columns.h5"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The data can be imported again using alabaster's readObject() function</span></span></span>
<span class="r-in"><span><span class="va">be_in</span> <span class="op">&lt;-</span> <span class="fu">readObject</span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendMzR with 7602 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     0.231         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            1     0.351         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1     0.471         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            1     0.591         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            1     0.711         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7598         1   899.491      7598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7599         1   899.613      7599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7600         1   899.747      7600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7601         1   899.872      7601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7602         1   899.993      7602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 33 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Alternatively, the data could be restored also using</span></span></span>
<span class="r-in"><span><span class="va">be_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">MsBackendMzR</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">AlabasterParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">mz</a></span><span class="op">(</span><span class="va">be</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">mz</a></span><span class="op">(</span><span class="va">be_in</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">########</span></span></span>
<span class="r-in"><span><span class="co">## Export and import of `Spectra` objects:</span></span></span>
<span class="r-in"><span><span class="co">####</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a `Spectra` object with a `MsBackendMzR` backend.</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="va">fl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Define the folder to which to export and export the object</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"spectra_example"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">s</span>, <span class="fu">AlabasterParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## List the content of the directory</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "OBJECT"                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2] "backend/OBJECT"                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "backend/peaks_variables/OBJECT"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "backend/peaks_variables/contents.h5"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "backend/spectra_data/OBJECT"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "backend/spectra_data/basic_columns.h5" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "metadata/OBJECT"                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "metadata/list_contents.json.gz"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "processing/OBJECT"                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "processing/contents.h5"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "processing_chunk_size/OBJECT"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] "processing_chunk_size/contents.h5"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "processing_queue_variables/OBJECT"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [14] "processing_queue_variables/contents.h5"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "spectra_processing_queue.json"         </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Restore the `Spectra` object again</span></span></span>
<span class="r-in"><span><span class="va">s_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">AlabasterParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">s_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MSn data (Spectra) with 7602 spectra in a MsBackendMzR backend:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     0.231         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            1     0.351         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1     0.471         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            1     0.591         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            1     0.711         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7598         1   899.491      7598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7599         1   899.613      7599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7600         1   899.747      7600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7601         1   899.872      7601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7602         1   899.993      7602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 33 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Alternatively, it would also be possible to just import the</span></span></span>
<span class="r-in"><span><span class="co">## `MsBackendMzR` of the `Spectra`:</span></span></span>
<span class="r-in"><span><span class="va">be_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">MsBackendMzR</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">AlabasterParam</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">d</span>, <span class="st">"backend"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendMzR with 7602 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     0.231         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            1     0.351         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1     0.471         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            1     0.591         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            1     0.711         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7598         1   899.491      7598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7599         1   899.613      7599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7600         1   899.747      7600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7601         1   899.872      7601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7602         1   899.993      7602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 33 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">########</span></span></span>
<span class="r-in"><span><span class="co">## Export and import of `MsExperiment` objects:</span></span></span>
<span class="r-in"><span><span class="co">####</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RforMassSpectrometry/MsExperiment" class="external-link">MsExperiment</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a new `MsExperiment` with sample data and our previously defined</span></span></span>
<span class="r-in"><span><span class="co">## `Spectra` as its MS data</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/MsExperiment/man/MsExperiment.html" class="external-link">MsExperiment</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    sampleData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, index <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    spectra <span class="op">=</span> <span class="va">s</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object of class MsExperiment </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Spectra: MS1 (4627) MS2 (2975) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Experiment data: 2 sample(s)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ms_experiment_example"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">saveObject</span><span class="op">(</span><span class="va">m</span>, <span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## List directory content</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "OBJECT"                  "experiment_files"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "metadata"                "other_data"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "sample_data"             "sample_data_links"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "sample_data_links_mcols" "spectra"                </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Restore the stored object</span></span></span>
<span class="r-in"><span><span class="va">m_in</span> <span class="op">&lt;-</span> <span class="fu">readObject</span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object of class MsExperiment </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Spectra: MS1 (4627) MS2 (2975) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Experiment data: 2 sample(s)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">########</span></span></span>
<span class="r-in"><span><span class="co">## Export and import of `XcmsExperiment` objects:</span></span></span>
<span class="r-in"><span><span class="co">####</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## `XcmsExperiment` objects extend `MsExperiment` to represent all</span></span></span>
<span class="r-in"><span><span class="co">## data of an MS experiment and contain in addition the results</span></span></span>
<span class="r-in"><span><span class="co">## of the preprocessing of the data with the *xcms* package. Below</span></span></span>
<span class="r-in"><span><span class="co">## we load the *xcms* package and load an example result object from that</span></span></span>
<span class="r-in"><span><span class="co">## package.</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sneumann/xcms" class="external-link">xcms</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This is xcms version 4.3.3 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘xcms’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:Spectra’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     ppm</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     sigma</span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xcms/man/loadXcmsData.html" class="external-link">loadXcmsData</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object of class XcmsExperiment </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Spectra: MS1 (8688) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Experiment data: 8 sample(s)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Sample data links:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - spectra: 8 sample(s) to 8688 element(s).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  xcms results:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - chromatographic peaks: 3651 in MS level(s): 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - adjusted retention times: mean absolute difference 6.46 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - correspondence results: 351 features in MS level(s): 1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Store this result object to a folder</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"xcms_experiment_example"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu">AlabasterParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "OBJECT"                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2] "chrom_peak_data"                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "chrom_peaks"                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "experiment_files"                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "feature_definitions"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "metadata"                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "other_data"                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "sample_data"                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "sample_data_links"                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "sample_data_links_mcols"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "spectra"                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] "xcms_experiment_process_history.json"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Restore the data; eventually needed additional parameters, such as</span></span></span>
<span class="r-in"><span><span class="co">## `spectraPath` to restore a `MsBackendMzR` if the original data files</span></span></span>
<span class="r-in"><span><span class="co">## have been moved, could be passed with the `...` parameter of</span></span></span>
<span class="r-in"><span><span class="co">## `readMsExperiment()`.</span></span></span>
<span class="r-in"><span><span class="va">x_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/xcms/man/XcmsExperiment.html" class="external-link">XcmsExperiment</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">AlabasterParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object of class XcmsExperiment </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Spectra: MS1 (8688) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Experiment data: 8 sample(s)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Sample data links:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - spectra: 8 sample(s) to 8688 element(s).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  xcms results:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - chromatographic peaks: 3651 in MS level(s): 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - adjusted retention times: mean absolute difference 6.46 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - correspondence results: 351 features in MS level(s): 1 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Rainer, Philippine Louail.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.9000.</p>
</div>

    </footer></div>





  </body></html>

