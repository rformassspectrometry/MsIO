<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Store contents of MS objects as plain text files — PlainTextParam • MsIO</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Store contents of MS objects as plain text files — PlainTextParam"><meta name="description" content="The saveMsObject() and readMsObject() methods with the PlainTextParam
option enable users to save/load different type of mass spectrometry (MS)
object as a collections of plain text files in/from a specified folder.
This folder, defined with the path parameter, will be created by the
storeResults() function. Writing data to a folder that contains already
exported data will result in an error.
All data is exported to plain text files, where possible as tabulator
delimited text files. Data is exported using R's write.table() function,
thus, the text files will also contain row names (first column) as well as
column names (header). Strings in the text files are quoted. Some
information, in particular the content of parameter classes within the
objects, is stored in JSON format instead.
The MS object currently supported for import and export with this parameter
are:
MsBackendMzR object, defined in the
(Spectra) package.
Spectra object, defined in the
(Spectra) package.
MsExperiment object, defined in the
(MsExperiment) package.
XcmsExperiment object, defined in the
(xcms) package.


See their respective section below for details and formats of the
exported files."><meta property="og:description" content="The saveMsObject() and readMsObject() methods with the PlainTextParam
option enable users to save/load different type of mass spectrometry (MS)
object as a collections of plain text files in/from a specified folder.
This folder, defined with the path parameter, will be created by the
storeResults() function. Writing data to a folder that contains already
exported data will result in an error.
All data is exported to plain text files, where possible as tabulator
delimited text files. Data is exported using R's write.table() function,
thus, the text files will also contain row names (first column) as well as
column names (header). Strings in the text files are quoted. Some
information, in particular the content of parameter classes within the
objects, is stored in JSON format instead.
The MS object currently supported for import and export with this parameter
are:
MsBackendMzR object, defined in the
(Spectra) package.
Spectra object, defined in the
(Spectra) package.
MsExperiment object, defined in the
(MsExperiment) package.
XcmsExperiment object, defined in the
(xcms) package.


See their respective section below for details and formats of the
exported files."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MsIO</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/MsIO.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/MsIO/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Store contents of MS objects as plain text files</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/MsIO/blob/main/R/PlainTextParam.R" class="external-link"><code>R/PlainTextParam.R</code></a>, <a href="https://github.com/RforMassSpectrometry/MsIO/blob/main/R/MsBackendMzR.R" class="external-link"><code>R/MsBackendMzR.R</code></a>, <a href="https://github.com/RforMassSpectrometry/MsIO/blob/main/R/MsExperiment.R" class="external-link"><code>R/MsExperiment.R</code></a>, and 2 more</small>
      <div class="d-none name"><code>PlainTextParam.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code><a href="saveMsObject.html">saveMsObject()</a></code> and <code><a href="saveMsObject.html">readMsObject()</a></code> methods with the <code>PlainTextParam</code>
option enable users to save/load different type of mass spectrometry (MS)
object as a collections of plain text files in/from a specified folder.
This folder, defined with the <code>path</code> parameter, will be created by the
<code>storeResults()</code> function. Writing data to a folder that contains already
exported data will result in an error.</p>
<p>All data is exported to plain text files, where possible as tabulator
delimited text files. Data is exported using R's <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table()</a></code> function,
thus, the text files will also contain row names (first column) as well as
column names (header). Strings in the text files are quoted. Some
information, in particular the content of <em>parameter</em> classes within the
objects, is stored in JSON format instead.</p>
<p>The MS object currently supported for import and export with this parameter
are:</p><ul><li><p><code>MsBackendMzR</code> object, defined in the
(<a href="https://bioconductor.org/packages/Spectra" class="external-link">Spectra</a>) package.</p></li>
<li><p><code>Spectra</code> object, defined in the
(<a href="https://bioconductor.org/packages/Spectra" class="external-link">Spectra</a>) package.</p></li>
<li><p><code>MsExperiment</code> object, defined in the
(<a href="https://bioconductor.org/packages/MsExperiment" class="external-link">MsExperiment</a>) package.</p></li>
<li><p><code>XcmsExperiment</code> object, defined in the
(<a href="https://bioconductor.org/packages/xcms" class="external-link">xcms</a>) package.</p></li>
</ul><p>See their respective section below for details and formats of the
exported files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">PlainTextParam</span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMzR,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMzR,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, spectraPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsExperiment,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsExperiment,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'XcmsExperiment,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'XcmsExperiment,PlainTextParam'</span></span>
<span><span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">param</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>For <code>PlainTextParam()</code>: <code>character(1)</code>, defining where the files
are going to be stored/ should be loaded from. The default is
<code>path = tempdir()</code>.</p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>for <code><a href="saveMsObject.html">saveMsObject()</a></code>: the MS data object to save, for
<code><a href="saveMsObject.html">readMsObject()</a></code>: the MS data object that should be returned</p></dd>


<dt id="arg-param">param<a class="anchor" aria-label="anchor" href="#arg-param"></a></dt>
<dd><p>an object defining and (eventually configuring) the file format
and file name or directory to/from which the data object should be
exported/imported.</p></dd>


<dt id="arg-spectrapath">spectraPath<a class="anchor" aria-label="anchor" href="#arg-spectrapath"></a></dt>
<dd><p>For <code><a href="saveMsObject.html">readMsObject()</a></code>: <code>character(1)</code> optionally allowing
to define the (absolute) path where the spectra files (<em>data storage
files</em>) can be found. This parameter is used for <code>MsBackendMzR</code> (see
descriptions below) and can be passed through <code>...</code> also to
<code><a href="saveMsObject.html">readMsObject()</a></code> functions for other classes (such as <code>Spectra</code>,
<code>MsExperiment</code> etc).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters passed down to internal functions. E.g.
parameter <code>spectraPath</code> (see above).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For <code>PlainTextParam()</code>: a <code>PlainTextParam</code> class. <code><a href="saveMsObject.html">saveMsObject()</a></code>
does not return anything but saves the object to collections of different
plain text files to a folder. The <code><a href="saveMsObject.html">readMsObject()</a></code> method returns the
restored data as an instance of the class specified with parameter <code>object</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-msbackendmzr-objects">On-disk storage for <code>MsBackendMzR</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-msbackendmzr-objects"></a></h2>



<p>For <code>MsBackendMzR</code> objects, defined in the <code>Spectra</code> package, the following
file is stored:</p><ul><li><p>The backend's <code><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData()</a></code> is stored in a tabular format in a text file
named <em>ms_backend_data.txt</em>. Each row of this tab-delimited text file
corresponds to a spectrum with its respective metadata in the columns.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-spectra-objects">On-disk storage for <code>Spectra</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-spectra-objects"></a></h2>



<p>For <code>Spectra</code> objects, defined in the <code>Spectra</code> package, the files listed
below are stored. Any parameter passed to the <code><a href="saveMsObject.html">saveMsObject()</a></code> method using
its <code>...</code> parameter are passed to the <code><a href="saveMsObject.html">saveMsObject()</a></code> call of the
<code>Spectra</code>'s backend.</p><ul><li><p>The <code>processingQueueVariables</code>, <code>processing</code>, <code><a href="https://rdrr.io/pkg/Spectra/man/processingChunkSize.html" class="external-link">processingChunkSize()</a></code>, and
<code>backend</code> class information of the object are stored in a text file named
<em>spectra_slots.txt</em>. Each of these slots is stored such that the name of
the slot is written, followed by "=" and the content of the slot.</p></li>
<li><p>The processing queue of the <code>Spectra</code> object, ensuring that any spectra
data modifications are retained, is stored in a <code>json</code> file named
<em>spectra_processing_queue.json</em>. The file is written such that each
processing step is separated by a line and includes all information about
the parameters and functions used for the step.</p></li>
<li><p>The <code>Spectra</code>'s MS data (i.e. it's backend) is stored/exported using
the <code><a href="saveMsObject.html">saveMsObject()</a></code> method of the respective backend type. Currently
only backends for which the <code><a href="saveMsObject.html">saveMsObject()</a></code> method is implemented (see
above) are supported.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-msexperiment-objects">On-disk storage for <code>MsExperiment</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-msexperiment-objects"></a></h2>



<p>For <code>MsExperiment</code> objects, defined in the <code>MsExperiment</code> package, the
exported data and related text files are listed below. Any parameter passed
to the <code><a href="saveMsObject.html">saveMsObject()</a></code> through <code>...</code> are passed to the <code><a href="saveMsObject.html">saveMsObject()</a></code>
calls of the individual MS data object(s) within the <code>MsExperiment</code>.</p>
<p>Note that at present <code><a href="saveMsObject.html">saveMsObject()</a></code> with <code>PlainTextParam</code> does <strong>not</strong>
export the full content of the <code>MsExperiment</code>, i.e. slots <code>@experimentFiles</code>,
<code>@qdata</code>, <code>@otherData</code> and <code>@metadata</code> are currently not saved.</p><ul><li><p>The <code><a href="https://rdrr.io/pkg/MsExperiment/man/MsExperiment.html" class="external-link">sampleData()</a></code> is stored as a text file named
<em>ms_experiment_sample_data.txt</em>. Each row of this file corresponds to a
sample with its respective metadata in the columns.</p></li>
<li><p>The links between the sample data and any other data within the
<code>MsExperiment</code> are stored in text files named
<em>ms_experiment_sample_data_links_....txt</em>,
with "..." referring to the data slot to which samples are linked.
Each file contains the mapping between the sample data and the elements in
a specific data slot (e.g., <code>Spectra</code>). The files are tabulator delimited
text files with two columns of integer values, the first representing the
index of a sample in the objects <code><a href="https://rdrr.io/pkg/MsExperiment/man/MsExperiment.html" class="external-link">sampleData()</a></code>, the second the index of
the assigned element in the respective object slot.
The table "ms_experiment_element_metadata.txt" contains the metadata of
each of the available mappings.</p></li>
<li><p>If the <code>MsExperiment</code> contains a <code>Spectra</code> object with MS data, it's
content is exported to the same folder using a <code><a href="saveMsObject.html">saveMsObject()</a></code> call on
it (see above for details of exporting <code>Spectra</code> objects to text files).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="on-disk-storage-for-xcmsexperiment-objects">On-disk storage for <code>XcmsExperiment</code> objects<a class="anchor" aria-label="anchor" href="#on-disk-storage-for-xcmsexperiment-objects"></a></h2>



<p>For <code>XcmsExperiment</code> objects, defined in the <em>xcms</em> package, the exported
data and related text files are listed below. Any parameter passed
to the <code><a href="saveMsObject.html">saveMsObject()</a></code> through <code>...</code> are passed to the <code><a href="saveMsObject.html">saveMsObject()</a></code>
calls of the individual MS data object(s) within the <code>XcmsExperiment</code>.</p><ul><li><p>The chromatographic peak information obtained with <code><a href="https://rdrr.io/pkg/xcms/man/XCMSnExp-class.html" class="external-link">chromPeaks()</a></code> and
<code>chromPeaksData()</code> is stored in tabular format in the text files
<em>xcms_experiment_chrom_peaks.txt</em> and
<em>xcms_experiment_chrom_peak_data.txt</em>, respectively. The first file's
rows represent single peaks with their respective metadata in the columns
(only numeric information). The second file contains arbitrary additional
information/metadata for each peak (each row being one chrom peak).</p></li>
<li><p>The <code><a href="https://rdrr.io/pkg/xcms/man/XCMSnExp-class.html" class="external-link">featureDefinitions()</a></code> are stored in a text file named
<em>xcms_experiment_feature_definitions.txt</em>. Additionally, a second file
named <em>ms_experiment_feature_peak_index.txt</em> is generated to connect the
features with the corresponding chromatographic peaks. Each row of the
first file corresponds to a feature with its respective metadata in the
columns. The second file contains the mapping between features and
chromatographic peaks (one peak ID per row).</p></li>
<li><p>The <code><a href="https://rdrr.io/pkg/xcms/man/XCMSnExp-class.html" class="external-link">processHistory()</a></code> information of the object is stored to a
file named <em>xcms_experiment_process_history.json</em> in JSON format.</p></li>
<li><p>The <code>XcmsExperiment</code> directly extends the <code>MsExperiment</code> class, thus,
any MS data is saved using a call to the <code>saveMsObject</code> of the
<code>MsExperiment</code> (see above for more information).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other MS object export and import formats.:
<code><a href="AlabasterParam.html">AlabasterParam</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Philippine Louail</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Export and import a `Spectra` object:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RforMassSpectrometry/Spectra" class="external-link">Spectra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">msdata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"TripleTOF-SWATH"</span>, <span class="st">"PestMix1_DDA.mzML"</span>, package <span class="op">=</span> <span class="st">"msdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="va">fl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Export the object to a temporary directory</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"spectra_example"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">sps</span>, <span class="fu">PlainTextParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## List the exported plain text files:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "OBJECT"                        "backend"                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "metadata"                      "ms_backend_data.txt"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "processing"                    "processing_chunk_size"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "processing_queue_variables"    "spectra_processing_queue.json"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [9] "spectra_slots.txt"            </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## - ms_backend_data.txt contains the metadata for the MS backend used (a</span></span></span>
<span class="r-in"><span><span class="co">##   'MsBackendMzR`.</span></span></span>
<span class="r-in"><span><span class="co">## - spectra_slots.txt contains general information from the Spectra object.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Import the data again. By using `Spectra()` as first parameter we ensure</span></span></span>
<span class="r-in"><span><span class="co">## the result is returned as a `Spectra` object.</span></span></span>
<span class="r-in"><span><span class="va">sps_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">PlainTextParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> backend MsBackendMzR</span>
<span class="r-in"><span><span class="va">sps_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MSn data (Spectra) with 7602 spectra in a MsBackendMzR backend:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     0.231         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            1     0.351         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1     0.471         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            1     0.591         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            1     0.711         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7598         1   899.491      7598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7599         1   899.613      7599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7600         1   899.747      7600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7601         1   899.872      7601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7602         1   899.993      7602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 27 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Check that the data is the same</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">rtime</a></span><span class="op">(</span><span class="va">sps</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">rtime</a></span><span class="op">(</span><span class="va">sps_in</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">intensity</a></span><span class="op">(</span><span class="va">sps</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">intensity</a></span><span class="op">(</span><span class="va">sps_in</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The data got exported *by module*, thus we could also load only a part of</span></span></span>
<span class="r-in"><span><span class="co">## the exported data, such as just the `MsBackend` used by the `Spectra`:</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">MsBackendMzR</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">PlainTextParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendMzR with 7602 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     0.231         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            1     0.351         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1     0.471         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            1     0.591         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            1     0.711         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7598         1   899.491      7598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7599         1   899.613      7599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7600         1   899.747      7600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7601         1   899.872      7601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7602         1   899.993      7602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 27 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The export functionality also ensures that the data/object can be</span></span></span>
<span class="r-in"><span><span class="co">## completely restored, i.e., for `Spectra` objects also their</span></span></span>
<span class="r-in"><span><span class="co">## *processing queue* is preserved/stored. To show this we below first</span></span></span>
<span class="r-in"><span><span class="co">## filter the spectra object by retention time and m/z:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sps_filt</span> <span class="op">&lt;-</span> <span class="va">sps</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">filterRt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">600</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">filterMzRange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">300</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## The filtered object has less spectra</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sps_filt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2054</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sps</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7602</span>
<span class="r-in"><span><span class="co">## And also less mass peaks per spectrum</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="va">sps_filt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]   0   0 101</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="va">sps</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 223 211 227</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"spectra_example2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="saveMsObject.html">saveMsObject</a></span><span class="op">(</span><span class="va">sps_filt</span>, <span class="fu">PlainTextParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The directory contains now an additional file with the processing</span></span></span>
<span class="r-in"><span><span class="co">## queue of the `Spectra`.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ms_backend_data.txt"           "spectra_processing_queue.json"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "spectra_slots.txt"            </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Restoring the object again.</span></span></span>
<span class="r-in"><span><span class="va">sps_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="saveMsObject.html">readMsObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">PlainTextParam</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> backend MsBackendMzR</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Both objects have the same processing history</span></span></span>
<span class="r-in"><span><span class="va">sps_filt</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MSn data (Spectra) with 2054 spectra in a MsBackendMzR backend:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            2   400.088      3242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            2   400.208      3243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1   400.346      3244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            2   400.498      3245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            2   400.618      3246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2050         2   599.253      5291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2051         2   599.373      5292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2052         1   599.511      5293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2053         1   599.636      5294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2054         2   599.904      5295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 33 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lazy evaluation queue: 1 processing step(s)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Processing:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Filter: select retention time [400..600] on MS level(s) 1 2 [Thu Aug 22 14:07:21 2024]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Filter: select peaks with an m/z within [200, 300] [Thu Aug 22 14:07:21 2024] </span>
<span class="r-in"><span><span class="va">sps_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MSn data (Spectra) with 2054 spectra in a MsBackendMzR backend:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            2   400.088      3242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            2   400.208      3243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            1   400.346      3244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            2   400.498      3245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            2   400.618      3246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2050         2   599.253      5291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2051         2   599.373      5292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2052         1   599.511      5293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2053         1   599.636      5294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2054         2   599.904      5295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 27 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> file(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PestMix1_DDA.mzML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lazy evaluation queue: 1 processing step(s)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Processing:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Filter: select retention time [400..600] on MS level(s) 1 2 [Thu Aug 22 14:07:21 2024]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Filter: select peaks with an m/z within [200, 300] [Thu Aug 22 14:07:21 2024] </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Same number of spectra</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sps_filt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2054</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sps_in</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2054</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Same number of mass peaks (after filtering)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="va">sps_filt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]   0   0 101</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lengths.html" class="external-link">lengths</a></span><span class="op">(</span><span class="va">sps_in</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]   0   0 101</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Rainer, Philippine Louail.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.9000.</p>
</div>

    </footer></div>





  </body></html>

